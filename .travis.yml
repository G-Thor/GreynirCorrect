language: python

cache: pip

dist: xenial

python:
  - "3.6"
  - "3.7"
  - "3.8"
  - "3.9-dev"
  - "pypy3"

before_install:
  - python -m pip install --upgrade pip
  - python -m pip install --upgrade pytest
  - if [ "$TRAVIS_PYTHON_VERSION" == "3.6" ]; then python -m pip install mypy; fi
  - python -m pip install git+https://github.com/mideind/Tokenizer#egg=tokenizer
  - python -m pip install git+https://github.com/mideind/Icegrams#egg=icegrams
  - python -m pip install git+https://github.com/mideind/ReynirPackage#egg=reynir

install:
  - python -m pip install -e .

script:
  - if [ "$TRAVIS_PYTHON_VERSION" == "3.6" ]; then python -m mypy src/reynir_correct/__init__.py; fi
  - python -m pytest

notifications:
  slack: greynir:38FfPr1S8oZRNFMmt47mzT3z
